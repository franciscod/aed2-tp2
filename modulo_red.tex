\section{Módulo Red}

\subsection{Interfaz}

\textbf{se explica con}: \tadNombre{red}.

\textbf{géneros}: \TipoVariable{red}.

  ~

  \InterfazFuncion{IniciarRed}{}{red}
  [true]
  {$res$ $\igobs$ iniciarRed}
  [$O(1)$]
  [Crea una red nueva]
  

  ~

  \InterfazFuncion{AgregarComputadora}{\Inout{r}{red}, \In{c}{compu}}{}
  [($r$ \igobs $r_0$) $\land$ (($\forall$ $c'$: compu) ($c'$ $\in$ computadoras($r$) $\Rightarrow$  ip($c$) $\neq$  ip($c'$)))  ]
  {$r$ $\igobs$ agregarComputadora($r_0$, $c$)) }
  [$O(L + n)$]
  [Agrega un computadora a la red]

  ~

  \InterfazFuncion{Conectar}{\Inout{r}{red}, \In{c}{compu}, \In{c'}{compu}, \In{i}{compu}, \In{i'}{compu}}{}
  [($r$ \igobs $r_0$) $\land$ ($c$ $\in$ computadoras($r$)) $\land$ ($c'$ $\in$ computadoras(r)) $\land$ (ip($c$) $\neq$ ip($c'$)) \\
   $\land$ ($\neg$conectadas?($r$, $c$, $c'$)) $\land$ ($\neg$usaInterfaz?($r$, $c$, $i$) $\land$ $\neg$usaInterfaz?($r$, $c'$, $i'$))]
  {$r$ $\igobs$ conectar($r_0$, $c$, $i$, $c'$, $i'$))}
  [$O(L) ?$]
  [Conecta dos computadoras]

  ~

  \InterfazFuncion{Computadoras}{\In{r}{red}}{conj(compu)}
  [true]
  {$res$ \igobs computadoras($r$)}
  [$O(1)$]
  [Devuelve las computadoras de la red]
  [Devuelve una referancia no modificable]

  ~

  \InterfazFuncion{Conectadas?}{\In{r}{red}, \In{c}{compu}, \In{c'}{compu}}{bool}
  [($c$ $\in$ computadoras($r$)) $\land$ ($c'$ $\in$ computadoras($r$))]
  {$res$ \igobs conectadas?($r$, $c$, $c'$)}
  [$O(1)$]
  [Indica si dos computadoras de la red estan conectadas]

  ~

  \InterfazFuncion{InterfazUsada}{\In{r}{red}, \In{c}{compu},  \In{c'}{compu}}{interfaz}
  [conectadas?($r$, $c$, $c'$)]
  {$res$ \igobs interfazUsada($r$, $c$, $c'$)}
  [$O(L + n)$]
  [Devuelve la interfaz con la cual se conecta c con c']

  ~

  \InterfazFuncion{Vecinos}{\In{r}{red}, \In{c}{compu}}{conj(compu)}
  [$c$ $\in$ computadoras($r$)]
  {$res$ \igobs vecinos($r$, $c$)}
  [$O(n)$]
  [Devuelve el conjunto de computadoras conectadas con c]
  [Devuelve una copia de las computadoras conectadas a c]

  ~

  \InterfazFuncion{usaInterfaz?}{\In{r}{red}, \In{c}{compu}, \In{i}{interfaz}}{bool}
  [$c$ $\in$ computadoras($r$)]
  {$res$ \igobs usaInterfaz?($r$, $c$, $i$)}
  [$O(L + n)$]
  [Indica si la interfaz i es usada por la computadora c]

  ~

  \InterfazFuncion{CaminosMinimos}{\In{r}{red}, \In{c}{compu}, \In{c'}{compu}}{conj(secu(compu))}
  [($c$ $\in$ computadoras($r$)) $\land$ ($c'$ $\in$ computadoras(r))]
  {$res$ \igobs caminosMinimos($r$, $c$, $i$)}
  [$O(L)$]
  [Devuelve el conjunto de caminos minimos de c a c']
  [Devuelve una refencia no modificable]


  ~

  \InterfazFuncion{HayCamino?}{\In{r}{red}, \In{c}{compu}, \In{c'}{compu}}{bool}
  [($c$ $\in$ computadoras($r$)) $\land$ ($c'$ $\in$ computadoras(r))]
  {$res$ \igobs hayCamino?($r$, $c$, $i$)}
  [$O(L)$]
  [Indica si existe un/os camino/s c de a c']

  ~

  \InterfazFuncion{copiar}{\In{r}{red}}{red}
  [true]
  {$res$ \igobs $r$}
  [$O(?)$]
  [Devuelve una copia la red]

  ~

  \InterfazFuncion{• = •}{\In{r}{red}, \In{r'}{red}}{bool}
  [true]
  {$res$ \igobs ($r$ \igobs $r'$)}
  [$O(?)$]
  [Indica si son r es igual a r']

  ~


\subsection{Representación}

  \subsubsection{Estructura}

    \begin{Estructura}{red}[estr]

      \begin{Tupla}[estr]
        \tupItem{compus}{conj(compu)}
        \tupItem{\\dns}{dicc$_{Trie}$(ip, nodoRed)}
      \end{Tupla}

      ~

      \begin{Tupla}[nodoRed]
        \tupItem{c}{puntero(compu)}
        \tupItem{\\caminos}{dicc$_{Trie}$(ip, conj(lista(compu)))}
        \tupItem{\\conexiones}{dicc$_{Lineal}$(interfaz, compu)}
      \end{Tupla}


    \end{Estructura}

\subsubsection{Invariante de Representación}
  \begin{enumerate}

  \item Todas las compus deben tener IPs distintas.

  \item Ninguna compu se conecta con si misma.

  \item Ninguna compu se conecta a otra a traves de dos interfaces distintas.

  \item El trie \TipoVariable{estr}.$dns$ apunta a un \TipoVariable{nodoRed}
        por cada elemento de $compus$.

  \item En cada \TipoVariable{nodoRed}, $c$ tiene que apuntar a un elemento de \TipoVariable{estr}.$compus$.

  \item Para cada \TipoVariable{nodoRed}, $caminos$ tiene como claves todas las
        IPs de las compus de la red, y los significados corresponden a todos los caminos
        mínimos desde la compu $c$ hacia la compu cuya IP es clave.

  \item \TipoVariable{nodoRed}.$conexiones$ contiene como claves todas las
        \TipoVariable{interfaz} usaconedas de la compu $c$ (que tienen que estar en $c$.$interfaces$)

  \end{enumerate}

  \Rep[estr][e]{

  %   ($\forall a$: string)($a \in e$.estaciones $<=>$ def?($a$, $e$.restricciones) ) $\land$ \\
  %   ($\forall c$, $s$: string)(def?($c$, $e$.restricciones) $\impluego$ \\
  %   ($\neg$def?($c$, obtener($c$, $e$.restricciones)) $\land$ \\
  %   (def?($s$, obtener($c$, $e$.restricciones)) $\impluego$ (def?($s$, $e$) $\land$ $s < c$)))) $\land$ \\
  %   ($\forall c$, $s$: string)(def?($c$, $e$.restricciones) $\impluego$ \\
  %   (def?($s$, obtener($c$, $e$.restricciones)) <=> <$c$, $s$> $\in$ $e$.sendas))}\mbox{}
  }

  \subsubsection{Función de Abstracción}

   \Abs[estr]{red}[e]{r}{
    % m.estaciones $\igobs$ e.estaciones $\land$ \\
    % ($\forall c$, $s$: string)(($c$ $\in$ estaciones($e$) $\land$ $s$ $\in$ estaciones($e$) $\land$ $c < s$) $\Rightarrow$ \\
                              % ((def?($s$, obtener($c$, $e$)) $\igobs$ conectadas?($c$, $s$, $m$)) $\yluego$ \\
                              % (def?($s$, obtener($c$, $e$)) $\impluego$ (obtener($s$, obtener($c$, $e$)) $\igobs$ restriccion($c$, $s$, $m$)))))
   }
